(function(){"use strict";var e={117:function(e,t,a){var s=a(963),i=a(252),n=a(262),r=a(577);const l={class:"search-select"},c=["value"];var o={__name:"SearchableListSelect",props:{list:{type:Array,required:!0},selected:{type:[String,Object],default:""}},emits:["update:selected"],setup(e,{emit:t}){const a=t,o=e,u=(0,n.iH)(""),d=(0,i.Fl)({get(){return o.selected},set(e){a("update:selected",e)}}),p=(0,i.Fl)({get(){return o.list.filter((e=>e.folderName.toLowerCase().includes(u.value.toLowerCase())))}});return(e,t)=>((0,i.wg)(),(0,i.iD)("div",l,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),placeholder:"Search Subjects...",onInput:t[1]||(t[1]=(...t)=>e.filterList&&e.filterList(...t))},null,544),[[s.nr,u.value]]),(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>d.value=e)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(p.value,((e,t)=>((0,i.wg)(),(0,i.iD)("option",{value:e,key:t},(0,r.zw)(e.folderName),9,c)))),128))],512),[[s.bM,d.value]])]))}},u=a(744);const d=(0,u.Z)(o,[["__scopeId","data-v-6d6b3e46"]]);var p=d;const g={id:"buttons"};var _={__name:"SubjectSelect",props:{subject:{},subjects:{type:Array,required:!0}},emits:["update:subject"],setup(e,{emit:t}){const a=e,s=t;function n(e){if(a.subject){let t=a.subjects.indexOf(a.subject);t+=e,t>=0&&t<a.subjects.length&&(r.value=a.subjects[t])}}const r=(0,i.Fl)({get(){return a.subject},set(e){s("update:subject",e)}});return(t,a)=>((0,i.wg)(),(0,i.iD)("div",g,[(0,i.Wm)(p,{selected:r.value,"onUpdate:selected":a[0]||(a[0]=e=>r.value=e),list:e.subjects,id:"select"},null,8,["selected","list"]),(0,i._)("button",{onClick:a[1]||(a[1]=e=>n(-1))},"<"),(0,i._)("button",{onClick:a[2]||(a[2]=e=>n(1))},">")]))}};const m=(0,u.Z)(_,[["__scopeId","data-v-907e2988"]]);var f=m;const h=e=>((0,i.dD)("data-v-2ac813db"),e=e(),(0,i.Cn)(),e),b={id:"multiselect"},w=h((()=>(0,i._)("option",{selected:"",disabled:"",value:"select a bundle"},"select a bundle",-1))),S=["value"],v={id:"scrollBox"},y={id:"remove"},k=["onClick"];var D={__name:"MultiSelect",props:{items:{type:Array,required:!0},selected:{type:Array,required:!0}},emits:["update:selected"],setup(e,{emit:t}){const a=e,l=t,c=(0,i.Fl)({get(){return a.selected},set(e){const t=[...c.value,e];l("update:selected",t)}}),o=(0,n.iH)("select a bundle"),u=(0,i.Fl)({get(){return o.value},set(e){const t=[...c.value,e];l("update:selected",t),console.log("resetting value"),o.value="select a bundle"}}),d=(0,i.Fl)((()=>a.items.filter((e=>!a.selected.includes(e)))));function p(e){const t=c.value.filter((t=>t!==e));l("update:selected",t)}function g(){c.value.length>0?l("update:selected",[]):l("update:selected",a.items)}return(e,t)=>((0,i.wg)(),(0,i.iD)("div",b,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e)},[w,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(d.value,((e,t)=>((0,i.wg)(),(0,i.iD)("option",{value:e,key:t},(0,r.zw)(e),9,S)))),128))],512),[[s.bM,u.value]]),(0,i._)("button",{onClick:t[1]||(t[1]=e=>g())},"toggle all"),(0,i._)("div",v,[(0,i._)("ul",y,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(c.value,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:t},[(0,i._)("button",{onClick:t=>p(e)},"x",8,k),(0,i.Uk)((0,r.zw)(e),1)])))),128))])])]))}};const x=(0,u.Z)(D,[["__scopeId","data-v-2ac813db"]]);var C=x;const T={class:"tooltip"},M={class:"tooltiptext"};var F={__name:"ToolTip",props:{tip:{type:String,required:!0}},setup(e){const t=e;return(e,a)=>((0,i.wg)(),(0,i.iD)("div",T,[(0,i.WI)(e.$slots,"default"),(0,i._)("span",M,(0,r.zw)(t.tip),1)]))}};const R=(0,u.Z)(F,[["__scopeId","data-v-321e8a09"]]);var q=R,N=a(648),B=a(876),j=JSON.parse('{"hcp":{"bucket":"open-neurodata","prefix":"rokem/hcp1200/afq/","participantsSize":2000,"scans":["model-DKI_FA","b0","model-CSD_APM","model-DKI_AWF","model-DKI_MD","model-DKI_MK","model-DTI_FA"],"bundles":[{"name":"Anterior Frontal","index":16,"rgba255":[17,119,51,255]},{"name":"Arcuate Fasciculus-Left","index":13,"rgba255":[23,190,207,255]},{"name":"Arcuate Fasciculus-Right","index":12,"rgba255":[158,218,229,255]},{"name":"Anterior Thalamic Radiation-Left","index":1,"rgba255":[31,119,180,255]},{"name":"Anterior Thalamic Radiation-Right","index":0,"rgba255":[174,199,232,255]},{"name":"Cingulate Cingulum-Left","index":3,"rgba255":[44,160,44,255]},{"name":"Cingulate Cingulum-Right","index":2,"rgba255":[152,223,138,255]},{"name":"Corticospinal Tract-Left","index":5,"rgba255":[255,127,14,255]},{"name":"Corticospinal Tract-Right","index":4,"rgba255":[255,187,120,255]},{"name":"Inferior Fronto-Occipital Fasciculus-Left","index":7,"rgba255":[140,86,75,255]},{"name":"Inferior Fronto-Occipital Fasciculus-Right","index":6,"rgba255":[196,156,148,255]},{"name":"Inferior Longitudinal Fasciculus-Left","index":9,"rgba255":[227,119,194,255]},{"name":"Inferior Longitudinal Fasciculus-Right","index":8,"rgba255":[247,182,210,255]},{"name":"Motor","index":17,"rgba255":[135,204,237,255]},{"name":"Occipital","index":18,"rgba255":[170,68,153,255]},{"name":"Orbital","index":19,"rgba255":[51,33,135,255]},{"name":"Posterior Parietal","index":20,"rgba255":[204,102,119,255]},{"name":"Superior Longitudinal Fasciculus-Left","index":11,"rgba255":[127,127,127,255]},{"name":"Superior Longitudinal Fasciculus-Right","index":10,"rgba255":[199,199,199,255]},{"name":"Superior Frontal","index":21,"rgba255":[68,170,153,255]},{"name":"Superior Parietal","index":22,"rgba255":[221,204,119,255]},{"name":"Temporal","index":23,"rgba255":[135,33,84,255]},{"name":"Uncinate Fasciculus-Left","index":15,"rgba255":[188,189,34,255]},{"name":"Uncinate Fasciculus-Right","index":14,"rgba255":[219,219,141,255]}],"trxFile":{"fileName":"clean"}},"hbn":{"bucket":"fcp-indi","prefix":"data/Projects/HBN/BIDS_curated/derivatives/afq/","participantsSize":2000,"subfolders":[{"path":"clean_bundles/","extension":"trk"}],"scans":["model-DKI_FA","b0","model-CSD_APM","model-DKI_AWF","model-DKI_MD","model-DKI_MK","model-DTI_FA"],"trkFiles":[{"name":"Anterior Frontal","fileName":"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-AntFrontal_tractography.trk","rgba255":[17,119,51,255]},{"name":"Arcuate Fasciculus-Left","fileName":"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-ARC_L_tractography.trk","rgba255":[23,190,207,255]},{"name":"Arcuate Fasciculus-Right","fileName":"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-ARC_R_tractography.trk","rgba255":[158,218,229,255]},{"name":"Anterior Thalamic Radiation-Left","fileName":"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-ATR_L_tractography.trk","rgba255":[31,119,180,255]},{"name":"Anterior Thalamic Radiation-Right","fileName":"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-ATR_R_tractography.trk","rgba255":[174,199,232,255]},{"name":"Cingulate Cingulum-Left","fileName":"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-CGC_L_tractography.trk","rgba255":[44,160,44,255]},{"name":"Cingulate Cingulum-Right","fileName":"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-CGC_R_tractography.trk","rgba255":[152,223,138,255]},{"name":"Corticospinal Tract-Left","fileName":"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-CST_L_tractography.trk","rgba255":[255,127,14,255]},{"name":"Corticospinal Tract-Right","fileName":"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-CST_R_tractography.trk","rgba255":[255,187,120,255]},{"name":"Inferior Fronto-Occipital Fasciculus-Left","fileName":"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-IFO_L_tractography.trk","rgba255":[140,86,75,255]},{"name":"Inferior Fronto-Occipital Fasciculus-Right","fileName":"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-IFO_R_tractography.trk","rgba255":[196,156,148,255]},{"name":"Inferior Longitudinal Fasciculus-Left","fileName":"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-ILF_L_tractography.trk","rgba255":[227,119,194,255]},{"name":"Inferior Longitudinal Fasciculus-Right","fileName":"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-ILF_R_tractography.trk","rgba255":[247,182,210,255]},{"name":"Motor","fileName":"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-Motor_tractography.trk","rgba255":[135,204,237,255]},{"name":"Occipital","fileName":"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-Occipital_tractography.trk","rgba255":[170,68,153,255]},{"name":"Orbital","fileName":"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-Orbital_tractography.trk","rgba255":[51,33,135,255]},{"name":"Posterior Parietal","fileName":"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-PostParietal_tractography.trk","rgba255":[204,102,119,255]},{"name":"Superior Longitudinal Fasciculus-Left","fileName":"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-SLF_L_tractography.trk","rgba255":[127,127,127,255]},{"name":"Superior Longitudinal Fasciculus-Right","fileName":"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-SLF_R_tractography.trk","rgba255":[199,199,199,255]},{"name":"Superior Frontal","fileName":"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-SupFrontal_tractography.trk","rgba255":[68,170,153,255]},{"name":"Superior Parietal","fileName":"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-SupParietal_tractography.trk","rgba255":[221,204,119,255]},{"name":"Temporal","fileName":"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-Temporal_tractography.trk","rgba255":[135,33,84,255]},{"name":"Uncinate Fasciculus-Left","fileName":"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-UNC_L_tractography.trk","rgba255":[188,189,34,255]},{"name":"Uncinate Fasciculus-Right","fileName":"_acq-64dir_space-T1w_desc-preproc_dwi_space-RASMM_model-CSD_desc-prob-afq-UNC_R_tractography.trk","rgba255":[219,219,141,255]}]}}');function A(e){return`https://${e.Bucket}.s3.amazonaws.com/${e.Key}`}function L(e){return new Promise(((t,a)=>{I(e).then((e=>{t(e)})).catch((e=>{a(e)}))}))}async function P(e,t){return new Promise(((a,s)=>{let i=[];function n(r=null){r&&(e.ContinuationToken=r),I(e).then((e=>{e.CommonPrefixes&&(i=i.concat(e.CommonPrefixes)),i>t&&a(i),1==e.IsTruncated?n(e.NextContinuationToken):a(i)})).catch((e=>{s(e)}))}n()}))}async function I(e){let t={};e.Prefix&&(t.prefix=e.Prefix),e.Delimiter&&(t.delimiter=e.Delimiter),e.ContinuationToken&&(t["continuation-token"]=e.ContinuationToken);const a=`https://${e.Bucket}.s3.amazonaws.com/?list-type=2&`,s=Object.entries(t).map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join("&"),i=a+s;let n=await fetch(i);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);let r=await n.text(),l=new DOMParser,c=l.parseFromString(r,"text/xml"),o={Contents:[]};return o.Contents=Array.from(c.getElementsByTagName("Contents")).map((e=>({Key:e.getElementsByTagName("Key")[0].textContent}))),o.CommonPrefixes=Array.from(c.getElementsByTagName("CommonPrefixes")).map((e=>e.textContent)),o.IsTruncated=c.getElementsByTagName("IsTruncated")[0].textContent,o.Prefix=c.getElementsByTagName("Prefix")[0].textContent,"true"==o.IsTruncated&&(o.IsTruncated,o.NextContinuationToken=c.getElementsByTagName("NextContinuationToken")[0].textContent),o}function U(e){const t={};for(const a of e){const e=a.split(".").slice(1);if(e.length>0){const s=e.join(".");t[s]?t[s].push(a):t[s]=[a]}}return t}function K(e){const t=e.split("/");let a=t.pop();while(""===a)a=t.pop();return a}function O(e){let t=[];for(let a of e){let e=K(a);t.push({prefix:a,folderName:e})}return t}function z(e,t){return t.filter((t=>e.some((e=>t.includes(e.fileName))))).map((t=>{const a=e.find((e=>t.includes(e.fileName)));return{filepath:t,name:a.name,rgba255:a.rgba255}}))}const H=(0,B.Q_)({id:"dataStore",state:()=>({datasets:j,dataset:Object.keys(j)[0],subjects:[],subject:null,sessions:[],session:null,files:[],trks:[],trxs:[],scans:[],scan:null,selectedBundles:[],loadTrx:!1}),getters:{getLoadTrx(){return this.loadTrx},getDataset(){return this.datasets[this.dataset]},getDatasets(){return this.datasets},getDatasetKey(){return this.dataset},getSubjects(){return this.subjects},getSubject(){return this.subject},getSessions(){return this.sessions},getSession(){return this.session},getScans(){return this.scans},getScanLink(){if(null===this.scan)return null;let e={Bucket:this.getDataset.bucket,Key:this.scan.path};return A(e)},getScan(){return this.scan},getBundleType(){return this.files["trx"]&&this.datasets[this.dataset].trxFile?"trx":this.files["trk"]&&this.datasets[this.dataset].trkFiles?"trk":"none"},getTrxBundles(){if("trx"===this.getBundleType)return this.getDataset.bundles},getBundleNames(){if("trx"===this.getBundleType)return this.getDataset.bundles?this.getDataset.bundles.map((e=>e.name)):[];if("trk"===this.getBundleType){let e=z(this.getDataset.trkFiles,this.trks);return e.map((e=>e.name))}return[]},getSelectedBundleNames(){return this.selectedBundles},getTrks(){if("trk"===this.getBundleType){let e=z(this.getDataset.trkFiles,this.trks),t=[];for(let a of e)if(this.selectedBundles.includes(a.name)){let e=A({Bucket:this.getDataset.bucket,Key:a.filepath,rgba255:a.rgba255}),s=a.rgba255;t.push({url:e,rgba255:s})}return t}return null},getTrxUrl(){let e=this.trxs.filter((e=>e.includes(this.getDataset.trxFile.fileName)));if(0===e.length)return null;if(e.length>1)throw new Error(`Multiple versions of ${this.getDataset.trxFile.fileName} found.`);return A({Bucket:this.getDataset.bucket,Key:e[0]})},getPngs(){return this.files["png"]}},actions:{setLoadTrx(e){this.loadTrx=e},async setDataset(e){if(!(e in this.datasets))throw new Error(`Dataset with key ${e} not found.`);this.files=[],this.trks=[],this.trxs=[],this.scans=[],this.scan=null,this.subjects=[],this.subject=null,this.sessions=[],this.session=null,this.selectedBundles=[],this.dataset=e,await this.updateSubjects(),await this.updateSessions(),await this.updateFiles()},selectBundle(e){!this.selectedBundles.includes(e)&&this.getBundleNames.includes(e)&&this.selectedBundles.push(e)},deselectBundle(e){this.selectedBundles.includes(e)&&(this.selectedBundles=this.selectedBundles.filter((t=>t!==e)))},async updateSubjects(){let e={Bucket:this.getDataset.bucket,Prefix:this.getDataset.prefix,Delimiter:"/"},t=await P(e,this.getDataset.participantsSize);this.subjects=O(t),this.subject=this.subjects[0]},async setSubject(e){this.files=[],this.trks=[],this.trxs=[],this.scans=[],this.scan=null,this.sessions=[],this.session=null,this.subject=e,await this.updateSessions(),await this.updateFiles()},async updateSessions(){if(this.getSubject){let e=[],t={Bucket:this.getDataset.bucket,Prefix:this.getSubject.prefix,Delimiter:"/"},a=await P(t,100);return e=O(a),0==e.length?(this.sessions=[{prefix:this.getSubject.prefix,folderName:"root"}],void(this.session=this.sessions[0])):(this.sessions=e,void(this.session=this.sessions[0]))}},setSession(e){this.files=[],this.trks=[],this.trxs=[],this.scans=[],this.scan=null,this.session=e,this.updateFiles()},async updateFiles(){let e={Bucket:this.getDataset.bucket,Prefix:this.getSession.prefix};console.log(e);let t=await L(e),a=t.Contents.map((e=>e.Key));var s=U(a);if(this.getDataset.subfolders)for(let i of this.getDataset.subfolders){let e={Bucket:this.getDataset.bucket,Prefix:this.getSession.prefix+i.path,Delimiter:"/"},t=await L(e),a=t.Contents.map((e=>e.Key)),n=U(a);s[i.extension]=n[i.extension]}this.files=s,this.files["nii.gz"]&&this.updateScans(this.files["nii.gz"]),this.files["trk"]?this.trks=this.files["trk"]:this.trks=[],this.files["trx"]?this.trxs=this.files["trx"]:this.trxs=[]},updateScans(e){if(e.length>0){let t=e.reduce(((e,t)=>(this.getDataset.scans.forEach((a=>{t.includes(a)&&e.push({name:a,path:t})})),e)),[]);if(this.scans=t,this.getScan){let e=this.scans.find((e=>e.name===this.getScan.name));this.scan=e||this.scans[0]}else this.scans.find((e=>e.name==this.getDataset.scans[0]))?this.scan=this.scans.find((e=>e.name==this.getDataset.scans[0])):this.scan=this.scans[0]}else this.scans=[],this.scan=null},setScan(e){this.scan=e}}}),Y=e=>((0,i.dD)("data-v-4577ab35"),e=e(),(0,i.Cn)(),e),V={id:"app"},E=Y((()=>(0,i._)("div",{id:"canvas-container"},[(0,i._)("canvas",{id:"gl"},"Your system doesn't support canvas")],-1))),W={class:"bottom-bar"},G={class:"tooltip"},$={class:"zoom"},Z={key:0},J="C = Cycle Clip Plane | V = Cycle Slice Type | H,L,J,K = rotation | Scroll = move clip plane | Right Click = rotate clip plain | Left Click = rotate camera";var Q={__name:"NiivueRender",setup(e){const t=H();var a=null,r=!1,l=null,c=.1;function o(){a=null,a=new N.Fr({show3Dcrosshair:!0,backColor:[1,1,1,1]}),a.attachTo("gl"),a.setSliceType(a.sliceTypeMultiplanar),a.setClipPlane([-.1,270,0]),a.setClipPlaneColor([.5,.5,.5,.5])}function u(){t.getTrxUrl&&window.open(t.getTrxUrl)}function d(){window.open(t.getScanLink)}async function p(e){if(r=!0,await a.loadVolumes([{url:e,colorMap:"gray"}]),await a.updateGLVolume(),l){let e=l;l=null,p(e)}r=!1,"trk"==t.getBundleType&&k&&D&&(h(k,D),k=null,D=null)}function g(){a.scene.volScaleMultiplier=10*c,a.drawScene()}(0,i.bv)((()=>{o()}));const _=(0,n.iH)(!1);async function m(e){if(console.log("loading trx"),_.value=!0,a.initialized||await a.init(),a.gl){let t=[{url:e,rgba255:[255,142,0,155]}];return await a.loadMeshes(t),_.value=!1,void console.log("loaded trx")}}function f(){if(0==v)return;let e={R:[],G:[],B:[],I:[]},s=t.getTrxBundles;for(let a=0;a<s.length;a++)t.getSelectedBundleNames.includes(s[a].name)&&(e.R.push(s[a].rgba255[0]),e.G.push(s[a].rgba255[1]),e.B.push(s[a].rgba255[2]),e.I.push(s[a].index));a.setMeshProperty(a.meshes[0].id,"fiberGroupColormap",e)}async function h(e,t){if(null!=e&&null!=t){const s=t.filter((t=>!e.includes(t))),i=e.filter((e=>!t.includes(e)));if(s.length>0&&b(s.map((e=>e.url))),i.length>0)for(let e=0;e<i.length;e++){let t=i[e];await w(t.url,t.rgba255)}for(let e=0;e<a.meshes.length;e++)await a.setMeshProperty(a.meshes[e].id,"fiberColor","Fixed")}}function b(e){for(let t=0;t<e.length;t++)a.removeMeshByUrl(e[t])}async function w(e,t){if(a.initialized||await a.init(),a.gl){let s={url:e,rgba255:t,gl:a.gl};await a.addMeshFromUrl(s)}else console.error("WebGL context is not initialized")}async function S(){for(let e=0;e<a.meshes.length;e++)await a.removeMesh(a.meshes[e].id)}var v=!1,y=!1;(0,i.YP)((()=>t.getSelectedBundleNames),(async(e,a)=>{e!=a&&"trx"==t.getBundleType&&1==v&&f()}));var k=null,D=null;return(0,i.YP)((()=>t.getTrks),((e,a)=>{e&&"trk"==t.getBundleType&&(1==v&&(S(),v=!1),r?(k=e,D=a):h(e,a))})),(0,i.YP)((()=>t.getScanLink),(async e=>{if(e)if(r)e;else if(await p(e),"trx"==t.getBundleType&&t.getTrxUrl&&!v&&!y){y=!0,await m(t.getTrxUrl),f();let e={R:[],G:[],B:[],I:[]};a.setMeshProperty(a.meshes[0].id,"fiberGroupColormap",e),y=!1,v=!0,t.selectedBundles=t.getBundleNames}})),(0,i.YP)((()=>t.getSubject),(async()=>{await S(),v=!1})),(e,a)=>((0,i.wg)(),(0,i.iD)("div",V,[E,(0,i._)("div",W,[(0,i._)("div",G,[(0,i.Wm)(q,{tip:J},{default:(0,i.w5)((()=>[(0,i.Uk)("Controls")])),_:1})]),(0,i._)("div",$,[(0,i.Uk)(" Zoom: "),(0,i.wy)((0,i._)("input",{type:"range",min:"0.01",max:"0.5",step:"0.01","onUpdate:modelValue":a[0]||(a[0]=e=>(0,n.dq)(c)?c.value=e:c=e),onInput:g},null,544),[[s.nr,(0,n.SU)(c)]])]),_.value?((0,i.wg)(),(0,i.iD)("div",Z," Loading Trx... ")):(0,i.kq)("",!0),(0,i._)("button",{id:"download",onClick:d},"Download NIFTI file"),"trx"==(0,n.SU)(t).getBundleType?((0,i.wg)(),(0,i.iD)("button",{key:1,id:"download",onClick:u},"Download TRX file")):(0,i.kq)("",!0)])]))}};const X=(0,u.Z)(Q,[["__scopeId","data-v-4577ab35"]]);var ee=X;const te={class:"select-container"},ae=["value"],se=["src"];var ie={__name:"PngViewer",setup(e){const t=H(),a=(0,n.iH)(),l=(0,i.Fl)({get(){let e={Bucket:t.getDataset.bucket,Key:a.value};return A(e)}});function c(e){let t=e.split("-").pop().split(".").shift();return t}return(0,i.YP)((()=>t.getPngs),(()=>{a.value=null})),(e,o)=>((0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",te,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":o[0]||(o[0]=e=>a.value=e)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,n.SU)(t).getPngs,((e,t)=>((0,i.wg)(),(0,i.iD)("option",{value:e,key:t},(0,r.zw)(c(e)),9,ae)))),128))],512),[[s.bM,a.value]]),(0,i._)("button",{onClick:o[1]||(o[1]=e=>a.value=null)},"Clear")]),a.value?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"responsive-image",src:l.value,alt:"image from dataset"},null,8,se)):(0,i.kq)("",!0)],64))}};const ne=ie;var re=ne;const le={id:"app"},ce={class:"vertical-menu"},oe=["value"],ue=["value"],de={key:0},pe=["value"],ge=(0,i._)("br",null,null,-1);var _e={__name:"App",setup(e){const t=H(),a=(0,i.Fl)({get(){return t.getDatasetKey},set(e){return t.setDataset(e)}}),l=(0,i.Fl)({get(){return t.getSubject},set(e){return t.setSubject(e)}}),c=(0,i.Fl)({get(){return t.getScan},set(e){return t.setScan(e)}}),o=(0,i.Fl)({get(){return t.getSession},set(e){return t.setSession(e)}}),u=(0,i.Fl)({get(){return t.getSelectedBundleNames},set(e){return t.selectedBundles=e}});return(0,i.bv)((()=>{t.setDataset(t.getDatasetKey)})),(e,d)=>((0,i.wg)(),(0,i.iD)("div",le,[(0,i.Wm)(ee),(0,i._)("div",ce,[(0,i.Uk)(" Dataset: "),(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":d[0]||(d[0]=e=>a.value=e)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,n.SU)(t).getDatasets,((e,t)=>((0,i.wg)(),(0,i.iD)("option",{value:t,key:t},(0,r.zw)(t),9,oe)))),128))],512),[[s.bM,a.value]]),(0,i.Uk)(" Subject: "),(0,i.Wm)(f,{subject:l.value,"onUpdate:subject":d[1]||(d[1]=e=>l.value=e),subjects:(0,n.SU)(t).getSubjects},null,8,["subject","subjects"]),(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":d[2]||(d[2]=e=>c.value=e)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,n.SU)(t).getScans,((e,t)=>((0,i.wg)(),(0,i.iD)("option",{value:e,key:t},(0,r.zw)(e.name),9,ue)))),128))],512),[[s.bM,c.value]]),(0,n.SU)(t).getSession?((0,i.wg)(),(0,i.iD)("div",de,"session: "+(0,r.zw)((0,n.SU)(t).getSession.folderName),1)):(0,i.kq)("",!0),(0,n.SU)(t).getSessions.length>1?(0,i.wy)(((0,i.wg)(),(0,i.iD)("select",{key:1,"onUpdate:modelValue":d[3]||(d[3]=e=>o.value=e)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.sessions,((e,t)=>((0,i.wg)(),(0,i.iD)("option",{value:e,key:t},(0,r.zw)(e.folderName),9,pe)))),128))],512)),[[s.bM,o.value]]):(0,i.kq)("",!0),(0,i.Wm)(C,{items:(0,n.SU)(t).getBundleNames,selected:u.value,"onUpdate:selected":d[4]||(d[4]=e=>u.value=e)},null,8,["items","selected"]),ge,(0,i.Uk)(" Tract Profiles: "),(0,n.SU)(t).getPngs?((0,i.wg)(),(0,i.j4)(re,{key:2})):(0,i.kq)("",!0)])]))}};const me=_e;var fe=me;const he=(0,s.ri)(fe),be=(0,B.WB)();he.use(be),he.mount("#app")}},t={};function a(s){var i=t[s];if(void 0!==i)return i.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,s,i,n){if(!s){var r=1/0;for(u=0;u<e.length;u++){s=e[u][0],i=e[u][1],n=e[u][2];for(var l=!0,c=0;c<s.length;c++)(!1&n||r>=n)&&Object.keys(a.O).every((function(e){return a.O[e](s[c])}))?s.splice(c--,1):(l=!1,n<r&&(r=n));if(l){e.splice(u--,1);var o=i();void 0!==o&&(t=o)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[s,i,n]}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var i,n,r=s[0],l=s[1],c=s[2],o=0;if(r.some((function(t){return 0!==e[t]}))){for(i in l)a.o(l,i)&&(a.m[i]=l[i]);if(c)var u=c(a)}for(t&&t(s);o<r.length;o++)n=r[o],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(u)},s=self["webpackChunktractoscope"]=self["webpackChunktractoscope"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(117)}));s=a.O(s)})();
//# sourceMappingURL=app.6d7cf47d.js.map